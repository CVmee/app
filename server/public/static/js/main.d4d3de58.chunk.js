(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,t,a){e.exports=a(85)},59:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),s=a.n(o),l=a(6),c=a(8),i=a(10),u=a(9),p=a(23),m=(a(58),a(59),a(29)),f=a(25),h=a(26),v=a.n(h),d=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e){var a=e.email,n=e.password;return t.service.post("/signup",{email:a,password:n})},this.login=function(e){var a=e.email,n=e.password;return t.service.post("/login",{email:a,password:n})},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=v.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL),withCredentials:!0})},g=a(11),I=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).logout=function(){n.props.setTheUser(!1),n.authService.logout()},n.authService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(m.a.Brand,{as:"div"},r.a.createElement(g.b,{to:"/"},"CVme")),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(f.a,{className:"ml-auto"},r.a.createElement(f.a.Link,{as:"div"},r.a.createElement(g.b,{to:"/gallery"},"Gallery")),this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.Link,{as:"div"},r.a.createElement(g.b,{to:"/profile"},"Profile")),r.a.createElement(f.a.Link,{as:"div",onClick:this.logout},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.Link,{as:"div"}," | "),r.a.createElement(f.a.Link,{as:"div"},r.a.createElement(g.b,{to:"/login"},"Login")),r.a.createElement(f.a.Link,{as:"div"},r.a.createElement(g.b,{to:"/signup"},"Sign Up"))))))}}]),a}(n.Component),E=function(e){return r.a.createElement("h1",null,"Home")},b=a(27),C=a(19),O=a(13),j=a(12),S=a(7),y=a(4),U=a(14),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(C.a)({},n.state.loginInfo),a=e.target,r=a.name,o=a.value;t=Object(C.a)(Object(C.a)({},t),{},Object(b.a)({},r,o)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.signup(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{email:"",password:""},errorMessage:""},n.authService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(S.a,{md:{span:4,offset:4}},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("hr",null),r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a.Group,{controlId:"name"},r.a.createElement(y.a.Label,null,"E-mail"),r.a.createElement(y.a.Control,{name:"email",type:"text",value:this.state.email,onChange:this.handleInputChange})),r.a.createElement(y.a.Group,{controlId:"pwd"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(U.a,{variant:"dark",type:"submit"},"Sign Up")),r.a.createElement("p",null,r.a.createElement("small",null,"Already have an account? ",r.a.createElement(g.b,{to:"/login"},"Log In"))))))}}]),a}(n.Component),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(C.a)({},n.state.loginInfo),a=e.target,r=a.name,o=a.value;t=Object(C.a)(Object(C.a)({},t),{},Object(b.a)({},r,o)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.login(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{email:"",password:""},errorMessage:""},n.authService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(S.a,{md:{span:4,offset:4}},r.a.createElement("h3",null,"Login"),r.a.createElement("hr",null),r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a.Group,{controlId:"email"},r.a.createElement(y.a.Label,null,"Email"),r.a.createElement(y.a.Control,{name:"email",type:"text",value:this.state.email,onChange:this.handleInputChange})),r.a.createElement(y.a.Group,{controlId:"pwd"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(U.a,{variant:"dark",type:"submit"},"Login")),r.a.createElement("p",null,r.a.createElement("small",null,"Don't have an account? ",r.a.createElement(g.b,{to:"/signup"},"Sign Up"))))))}}]),a}(n.Component),w=function e(){var t=this;Object(l.a)(this,e),this.getCVs=function(e){return t.service.get("/cvs/user/".concat(e))},this.getTemplates=function(){return t.service.get("/cvs/templates")},this.createCV=function(e,a){return t.service.post("/cvs/newcv",{name:e,user:a})},this.service=v.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL),withCredentials:!0})},V=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getCVs=function(e){n.state.cvs||n.userService.getCVs(e).then((function(e){return n.setState({cvs:e.data})})).catch((function(e){return console.log(e)}))},n.getTemplates=function(){n.state.templates||n.userService.getTemplates().then((function(e){return n.setState({templates:e.data})})).catch((function(e){return console.log(e)}))},n.browseTemplates=function(){n.setState({userAction:"templates"})},n.browseDashboard=function(){n.setState({userAction:"dashboard"})},n.createCV=function(e,t){n.userService.createCV(e,t).then((function(e){return n.setState({createdCV:e.data})})).catch((function(e){return console.log(e)}))},n.state={user:n.props.loggedInUser,cvs:void 0,templates:void 0,createdCV:void 0,userAction:"dashboard"},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.getCVs(this.props.loggedInUser._id),this.getTemplates(),this.state.createdCV?r.a.createElement(p.a,{to:"/cv/".concat(this.state.createdCV._id,"/edit")}):r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(S.a,null,"dashboard"===this.state.userAction?r.a.createElement("h1",null,"Dashboard"):r.a.createElement("h1",null,"Templates")),r.a.createElement(S.a,{lg:"2"},"dashboard"===this.state.userAction?r.a.createElement(U.a,{onClick:this.browseTemplates}," + New CV "):r.a.createElement(U.a,{onClick:this.browseDashboard}," Dashboard "))),r.a.createElement("hr",null),r.a.createElement(j.a,null,"dashboard"===this.state.userAction?this.state.cvs&&this.state.cvs.map((function(e,t){return r.a.createElement(S.a,{key:t,lg:"6"}," ",r.a.createElement(g.b,{to:"/cv/".concat(e._id,"/edit")},r.a.createElement(U.a,{key:e._id},e.name)," "))})):this.state.templates.map((function(t,a){return r.a.createElement(S.a,{key:a,lg:"6"}," ",r.a.createElement(U.a,{onClick:function(){return e.createCV(t.name,e.props.loggedInUser._id)},key:t._id},t.name)," ")}))))}}]),a}(n.Component),L=(a(83),a(84),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.state.cvInfo.userInfo[a]=r,n.props.updateCVInfo(n.state.cvInfo)},n.state={autoSaveInterval:void 0,user:n.props.loggedInUser,cvID:n.props.match.params.id,cvInfo:n.props.cvInfo,firstName:n.props.cvInfo.userInfo.firstName,lastName:n.props.cvInfo.userInfo.lastName,title:n.props.cvInfo.userInfo.title,email:n.props.cvInfo.userInfo.email,phone:n.props.cvInfo.userInfo.phone,profilePicture:n.props.cvInfo.userInfo.profilePicture,profileDescription:n.props.cvInfo.userInfo.profileDescription},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"title"},r.a.createElement(y.a.Label,null,"Job Title"),r.a.createElement(y.a.Control,{name:"title",type:"text",value:this.state.cvInfo.userInfo.title,onChange:this.handleInputChange}))),r.a.createElement(S.a,{lg:"6"},r.a.createElement(j.a,null,r.a.createElement(S.a,{lg:"5"},r.a.createElement("figure",{id:"profile-picture-img"},r.a.createElement("img",{src:this.state.cvInfo.userInfo.profilePicture,alt:"profile"}))),r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"profilePicture"},r.a.createElement(y.a.Label,null,"Edit Picture")),r.a.createElement(y.a.Group,{controlId:"profilePictureDelete"},r.a.createElement(y.a.Label,null,"Delete"))))),r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"firstName"},r.a.createElement(y.a.Label,null,"First Name"),r.a.createElement(y.a.Control,{name:"firstName",type:"text",value:this.state.cvInfo.userInfo.firstName,onChange:this.handleInputChange}))),r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"lastName"},r.a.createElement(y.a.Label,null,"Last Name"),r.a.createElement(y.a.Control,{name:"lastName",type:"text",value:this.state.cvInfo.userInfo.lastName,onChange:this.handleInputChange}))),r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"email"},r.a.createElement(y.a.Label,null,"Email"),r.a.createElement(y.a.Control,{name:"email",type:"text",value:this.state.cvInfo.userInfo.email,onChange:this.handleInputChange}))),r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"phone"},r.a.createElement(y.a.Label,null,"Phone"),r.a.createElement(y.a.Control,{name:"phone",type:"text",value:this.state.cvInfo.userInfo.phone,onChange:this.handleInputChange})))))}}]),a}(n.Component)),_=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:n.props.loggedInUser,cvInfo:n.props.cvInfo},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("h2",{className:"editor-section-title"},"Personal Details"),r.a.createElement(L,Object.assign({},this.props,this.state.cvInfo,{updateCVInfo:this.props.updateCVInfo})))}}]),a}(n.Component),k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.state[a]=r;var o=n.state,s=o.firstName,l=o.lastName,c=o.title,i=o.email,u=o.phone,p=o.profilePicture,m=o.profileDescription;n.props.updateCVInfo({firstName:s,lastName:l,title:c,email:i,phone:u,profilePicture:p,profileDescription:m})},n.state={autoSaveInterval:void 0,user:n.props.loggedInUser,cvID:n.props.match.params.id,cvInfo:n.props.cvInfo,firstName:n.props.cvInfo.userInfo.firstName,lastName:n.props.cvInfo.userInfo.lastName,title:n.props.cvInfo.userInfo.title,email:n.props.cvInfo.userInfo.email,phone:n.props.cvInfo.userInfo.phone,profilePicture:n.props.cvInfo.userInfo.profilePicture,profileDescription:n.props.cvInfo.userInfo.profileDescription},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(j.a,null,r.a.createElement(S.a,null,r.a.createElement(y.a.Group,{controlId:"profileDescription"},r.a.createElement(y.a.Label,null,"Describe yourself in 3 sentences"),r.a.createElement(y.a.Control,{name:"profileDescription",type:"text",value:this.state.profileDescription,onChange:this.handleInputChange})))))}}]),a}(n.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:n.props.loggedInUser,cvInfo:n.props.cvInfo},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("h2",{className:"editor-section-title"},"Profile Description"),r.a.createElement(k,Object.assign({},this.props,this.state.cvInfo,{updateCVInfo:this.props.updateCVInfo})))}}]),a}(n.Component),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.state[a]=r;var o=n.state,s=o.title,l=o.employer,c=o.start,i=o.end,u=o.city,p=o.description;n.props.updateEmploymentInfo(n.props.index,{title:s,employer:l,start:c,end:i,city:u,description:p})},n.state={autoSaveInterval:void 0,user:n.props.loggedInUser,cvID:n.props.match.params.id,cvInfo:n.props.employment,title:n.props.employment.title,employer:n.props.employment.employer,start:n.props.employment.start,end:n.props.employment.end,city:n.props.employment.city,description:n.props.employment.description},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement("h2",{className:"job-title"},this.state.title," at ",this.state.employer)),r.a.createElement(j.a,null,r.a.createElement(S.a,{lg:"6"},r.a.createElement(y.a.Group,{controlId:"title"},r.a.createElement(y.a.Label,null,"Job Title"),r.a.createElement(y.a.Control,{name:"title",type:"text",value:this.state.title,onChange:this.handleInputChange})))))}}]),a}(n.Component),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateEmploymentInfo=function(e,t){console.log("before"),console.log(n.state.employmentInfo),console.log("after"),console.log(n.state.employmentInfo),n.state.employmentInfo[e]=t;var a=n.state.employmentInfo;n.state.cvInfo=Object(C.a)(Object(C.a)({},n.state.cvInfo),{},{employment:a}),console.log("THIS IS THE NEW STATE"),console.log(n.state.cvInfo),n.props.updateCVInfo(n.state.cvInfo)},n.state={user:n.props.loggedInUser,cvInfo:n.props.cvInfo,employmentInfo:n.props.cvInfo.employment},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(O.a,null,r.a.createElement("h2",{className:"editor-section-title"},"Employment Info"),this.state.employmentInfo.map((function(t,a){return r.a.createElement(P,Object.assign({},e.props,e.state.cvInfo,{employment:t,key:a,index:a,updateEmploymentInfo:e.updateEmploymentInfo}))})))}}]),a}(n.Component),x=function e(){var t=this;Object(l.a)(this,e),this.getCVInfo=function(e){return t.service.get("/cvs/info/".concat(e))},this.updateCVInfo=function(e,a){return t.service.post("/cvs/update/".concat(e),a)},this.service=v.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL),withCredentials:!0})},R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getCVInfo=function(e){return n.cvService.getCVInfo(e)},n.updateCVInfo=function(e){n.setState({cvInfo:e}),n.state.autoSaveInterval&&clearTimeout(n.state.autoSaveInterval),n.state.autoSaveInterval=setTimeout((function(){n.cvService.updateCVInfo(n.state.cvID,n.state.cvInfo).then().catch((function(e){return console.log(e)}))}),1500)},n.autoSave=function(){},n.state={user:n.props.loggedInUser,cvID:n.props.cvID,cvInfo:void 0,autoSaveInterval:void 0},n.userService=new w,n.cvService=new x,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getCVInfo(this.state.cvID).then((function(t){return e.setState({cvInfo:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.cvInfo?r.a.createElement(j.a,null,r.a.createElement(S.a,{id:"editor-section",lg:"6"},r.a.createElement(_,Object.assign({},this.props,{cvInfo:this.state.cvInfo,updateCVInfo:this.updateCVInfo})),r.a.createElement(N,Object.assign({},this.props,{cvInfo:this.state.cvInfo,updateCVInfo:this.updateCVInfo})),r.a.createElement(A,Object.assign({},this.props,{cvInfo:this.state.cvInfo,updateCVInfo:this.updateCVInfo}))),r.a.createElement(S.a,{id:"visualizer-section",lg:"6"},r.a.createElement(O.a,null,"Visualizer"))):r.a.createElement(r.a.Fragment,null," ")}}]),a}(n.Component),G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:n.props.loggedInUser},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(S.a,{id:"editor-section",lg:"6"},r.a.createElement(O.a,null,"This is the Template Visualizer")),r.a.createElement(S.a,{id:"visualizer-section",lg:"6"},r.a.createElement(O.a,null,"Visualizer")))}}]),a}(n.Component),W=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:n.props.loggedInUser,userAction:"edition",cvID:n.props.match.params.id},n.userService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return"edition"===this.state.userAction?r.a.createElement(R,Object.assign({},this.props,{cvID:this.state.cvID,cvInfo:this.state.cvInfo})):r.a.createElement(G,this.props)}}]),a}(n.Component),H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){null===e.state.loggedInUser&&e.authService.isLoggedIn().then((function(t){return e.setTheUser(t.data)})).catch((function(){return e.setTheUser(!1)}))},e.state={loggedInUser:null},e.authService=new d,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser}),r.a.createElement("main",null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,render:function(){return r.a.createElement(E,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(p.b,{path:"/signup",render:function(t){return r.a.createElement(T,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(p.b,{path:"/login",render:function(t){return r.a.createElement(D,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(p.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(V,{loggedInUser:e.state.loggedInUser}):r.a.createElement(p.a,{to:"/"})}}),r.a.createElement(p.b,{path:"/cv/:id/edit",exact:!0,render:function(t){return e.state.loggedInUser?r.a.createElement(W,Object.assign({},t,{loggedInUser:e.state.loggedInUser})):r.a.createElement(p.a,{to:"/"})}}))))}}]),a}(n.Component);s.a.render(r.a.createElement(g.a,null,r.a.createElement(H,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.d4d3de58.chunk.js.map